generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(cuid())
  email        String   @unique
  name         String?
  fullName     String?  @map("full_name")
  passwordHash String?  @map("password_hash")
  avatarUrl    String?  @map("avatar_url")
  timezone     String?  @default("UTC")
  lastLogin    DateTime? @map("last_login")
  role         String   @default("USER")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("users")
}

model Workspace {
  id                     String   @id @default(cuid())
  name                   String
  slug                   String   @unique
  description            String?
  primaryUserId          String   @map("primary_user_id")
  slackChannelId         String?  @map("slack_channel_id")
  primaryClickupTaskId   String?  @map("primary_clickup_task_id")
  mainDriveFolderUrl     String?  @map("main_drive_folder_url")
  mainSheetUrl           String?  @map("main_sheet_url")
  subscriptionStatus     String   @default("ACTIVE") @map("subscription_status")
  stripeCustomerId       String?  @map("stripe_customer_id")
  stripeSubscriptionId   String?  @map("stripe_subscription_id")
  createdAt              DateTime @default(now()) @map("created_at")
  updatedAt              DateTime @updatedAt @map("updated_at")

  // Relations
  primaryUser User @relation(fields: [primaryUserId], references: [id])

  @@map("workspaces")
}

